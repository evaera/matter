<!doctype html>
<html lang="en" dir="ltr" class="plugin-moonwave plugin-id-moonwave">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<title data-rh="true">World | matter</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://eryn.io/matter/api/World"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="World | matter"><meta data-rh="true" name="description" content="A World contains entities which have components.
The World is queryable and can be used to get entities with a specific set of components.
Entities are simply ever-increasing integers."><meta data-rh="true" property="og:description" content="A World contains entities which have components.
The World is queryable and can be used to get entities with a specific set of components.
Entities are simply ever-increasing integers."><link data-rh="true" rel="canonical" href="https://eryn.io/matter/api/World"><link data-rh="true" rel="alternate" href="https://eryn.io/matter/api/World" hreflang="en"><link data-rh="true" rel="alternate" href="https://eryn.io/matter/api/World" hreflang="x-default"><link rel="stylesheet" href="/matter/assets/css/styles.c025533e.css">
<link rel="preload" href="/matter/assets/js/runtime~main.681328fc.js" as="script">
<link rel="preload" href="/matter/assets/js/main.8433c967.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/matter/"><div class="navbar__logo"><img src="/matter/logo.svg" alt="Matter" class="themedImage_ToTc themedImage--light_HNdA"><img src="/matter/logo.svg" alt="Matter" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/matter/docs/intro">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/matter/api/">API</a><a class="navbar__item navbar__link" href="/matter/changelog">Changelog</a></div><div class="navbar__items navbar__items--right"><a href="https://discord.gg/aQwDAYhqtJ" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Roblox Open Source Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://patreon.com/erynlynn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support on Patreon<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/evaera/matter" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Press S to Search..." aria-label="Search" class="navbar__search-input search-bar"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docPageContainer_wNNk"><div class="docPage_Dpn1"><div class="docSidebarContainer_o_re"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/matter/api/Matter">​Matter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/matter/api/World">​World</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/matter/api/QueryResult">​Query​Result</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/matter/api/Loop">​Loop</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/matter/api/Component">​Component</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/matter/api/Debugger">​Debugger</a></li></ul></nav></div></div><main class="docMainContainer_HJE1"><div class="container padding-vert--lg"><div class="row"><div class="col docItemCol_MU3C"><div class="docItemContainer_Wv98"><article><div class="member_J0w1 markdown"><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_oUs_"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><header><h1 class="docTitle_mZRt" style="text-decoration:none"><span style="display:inline-block">World</span></h1><div class="luaClassTags_EipM"></div><div>
<p>
  A World contains entities which have components.
  The World is queryable and can be used to get entities with a specific set of components.
  Entities are simply ever-increasing integers.
</p>
</div></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="functions">Functions<a class="hash-link" href="#functions" title="Direct link to heading">​</a></h2><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="new"><code style="text-decoration:none">new</code><a class="hash-link" href="#new" title="Direct link to heading">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/evaera/matter/blob/main/lib/World.lua#L25"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->.</code><code class="green_DgR4">new</code><code>(</code><code>) → </code><code>(</code><code>)</code></div><div>
<p>Creates a new World.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="__iter"><span style="font-style:italic">iterating over <!-- -->World</span><a class="hash-link" href="#__iter" title="Direct link to heading">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/evaera/matter/blob/main/lib/World.lua#L118"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code class="red_AwJO">for</code>  <span><code class="blue_P4bS">number</code><code>,</code> </span><span><code class="purple_ieR2">{</code><span><code>[</code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/matter/api/Component">Component</a></code><code>]</code></span><code>: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/matter/api/Component#ComponentInstance">ComponentInstance</a></code><code class="purple_ieR2">}</code> </span> <code class="red_AwJO">in</code>  <code class="green_DgR4">World</code>  <code class="red_AwJO">do</code></div><div>
<p>
  Iterates over all entities in this World. Iteration returns entity ID followed by a dictionary mapping
  Component to Component Instance.
</p>
<p><strong>Usage:</strong></p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">for</span> entityId<span class="token punctuation">,</span> entityData <span class="token keyword">in</span> world <span class="token keyword">do</span>
	<span class="token function">print</span><span class="token punctuation">(</span>entityId<span class="token punctuation">,</span> entityData<span class="token punctuation">[</span>Components<span class="token punctuation">.</span>Example<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spawn"><code style="text-decoration:none">spawn</code><a class="hash-link" href="#spawn" title="Direct link to heading">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/evaera/matter/blob/main/lib/World.lua#L128"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">spawn</code><code>(</code><div class="inset_uKQm"><div><code>...<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/matter/api/Component#ComponentInstance">ComponentInstance</a></code><span class="inlineDescription_G7Er">-- <span>
<p>The component values to spawn the entity with.</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The new entity ID.</p>
</span></span></div><div>
<p>Spawns a new entity in the world with the given components.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="spawnAt"><code style="text-decoration:none">spawnAt</code><a class="hash-link" href="#spawnAt" title="Direct link to heading">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/evaera/matter/blob/main/lib/World.lua#L141"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">spawnAt</code><code>(</code><div class="inset_uKQm"><div><code>id<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity ID to spawn with</p>
</span></span></div><div><code>...<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/matter/api/Component#ComponentInstance">ComponentInstance</a></code><span class="inlineDescription_G7Er">-- <span>
<p>The component values to spawn the entity with.</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The same entity ID that was passed in</p>
</span></span></div><div>
<p>Spawns a new entity in the world with a specific entity ID and given components.</p>
<p>The next ID generated from <a href="/matter/api/World#spawn">World:spawn</a> will be increased as needed to never collide with a manually specified ID.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="replace"><code style="text-decoration:none">replace</code><a class="hash-link" href="#replace" title="Direct link to heading">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/evaera/matter/blob/main/lib/World.lua#L259"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">replace</code><code>(</code><div class="inset_uKQm"><div><code>id<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity ID</p>
</span></span></div><div><code>...<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/matter/api/Component#ComponentInstance">ComponentInstance</a></code><span class="inlineDescription_G7Er">-- <span>
<p>The component values to spawn the entity with.</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>
  Replaces a given entity by ID with an entirely new set of components.
  Equivalent to removing all components from an entity, and then adding these ones.
</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="despawn"><code style="text-decoration:none">despawn</code><a class="hash-link" href="#despawn" title="Direct link to heading">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/evaera/matter/blob/main/lib/World.lua#L301"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">despawn</code><code>(</code><div class="inset_uKQm"><div><code>id<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity ID</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>Despawns a given entity by ID, removing it and all its components from the world entirely.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clear"><code style="text-decoration:none">clear</code><a class="hash-link" href="#clear" title="Direct link to heading">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/evaera/matter/blob/main/lib/World.lua#L321"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">clear</code><code>(</code><code>) → </code><code>(</code><code>)</code></div><div>
<p>Removes all entities from the world.</p>
<div class="admonition admonition-caution alert alert--warning">
  <div class="admonition-heading">
    <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
          <path d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path>
        </svg></span>caution</h5>
  </div>
  <div class="admonition-content">
    <p>Removing entities in this way is not reported by <code>queryChanged</code>.</p>
  </div>
</div>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="contains"><code style="text-decoration:none">contains</code><a class="hash-link" href="#contains" title="Direct link to heading">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/evaera/matter/blob/main/lib/World.lua#L337"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">contains</code><code>(</code><div class="inset_uKQm"><div><code>id<!-- -->: </code><code class="blue_P4bS">number</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity ID</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">bool</code><span class="inlineDescription_G7Er">-- <span>
<p><code>true</code> if the entity exists</p>
</span></span></div><div>
<p>Checks if the given entity ID is currently spawned in this world.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="get"><code style="text-decoration:none">get</code><a class="hash-link" href="#get" title="Direct link to heading">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/evaera/matter/blob/main/lib/World.lua#L348"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">get</code><code>(</code><div class="inset_uKQm"><div><code>id<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity ID</p>
</span></span></div><div><code>...<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/matter/api/Component">Component</a></code><span class="inlineDescription_G7Er">-- <span>
<p>The components to fetch</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS">...</code><span class="inlineDescription_G7Er">-- <span>
<p>Returns the component values in the same order they were passed in</p>
</span></span></div><div>
<p>Gets a specific component (or set of components) from a specific entity in this world.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="query"><code style="text-decoration:none">query</code><a class="hash-link" href="#query" title="Direct link to heading">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/evaera/matter/blob/main/lib/World.lua#L552"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">query</code><code>(</code><div class="inset_uKQm"><div><code>...<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/matter/api/Component">Component</a></code><span class="inlineDescription_G7Er">-- <span>
<p>The component types to query. Only entities with <em>all</em> of these components will be returned.</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/matter/api/QueryResult">QueryResult</a></code><span class="inlineDescription_G7Er">-- <span>
<p>See <a href="/matter/api/QueryResult">QueryResult</a> docs.</p>
</span></span></div><div>
<p>
  Performs a query against the entities in this World. Returns a <a href="/matter/api/QueryResult">QueryResult</a>, which iterates over
  the results of the query.
</p>
<p>Order of iteration is not guaranteed.</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">for</span> id<span class="token punctuation">,</span> enemy<span class="token punctuation">,</span> charge<span class="token punctuation">,</span> model <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">query</span><span class="token punctuation">(</span>Enemy<span class="token punctuation">,</span> Charge<span class="token punctuation">,</span> Model<span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token comment">-- Do something</span>
<span class="token keyword">end</span>

<span class="token keyword">for</span> id <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">query</span><span class="token punctuation">(</span>Target<span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token function">without</span><span class="token punctuation">(</span>Model<span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token comment">-- Again, with feeling</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="queryChanged"><code style="text-decoration:none">queryChanged</code><a class="hash-link" href="#queryChanged" title="Direct link to heading">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/evaera/matter/blob/main/lib/World.lua#L730"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">queryChanged</code><code>(</code><div class="inset_uKQm"><div><code>componentToTrack<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/matter/api/Component">Component</a></code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The component you want to listen to changes for.</p>
</span></span></div><div><code>...<!-- -->: </code><code class="blue_P4bS">nil</code></div></div><code>) → </code><code class="purple_ieR2">(</code><code class="purple_ieR2">)</code><code class="purple_ieR2"> → </code><code class="purple_ieR2">(</code><div class="inset_uKQm"><code class="blue_P4bS">id</code><code class="purple_ieR2">,</code></div><div class="inset_uKQm"><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/matter/api/World#ChangeRecord">ChangeRecord</a></code></div><code class="purple_ieR2">)</code><span class="inlineDescription_G7Er">-- <span>
<p>Iterator of entity ID and change record</p>
</span></span></div><h3>Types</h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ChangeRecord"><a class="hash-link" href="#ChangeRecord" title="Direct link to heading">​</a></h3><div class="memberString_GwaU"><code class="purple_ieR2">interface</code> <code>ChangeRecord<!-- --> <!-- -->{</code><div class="inset_uKQm"><div><code>new?<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/matter/api/Component#ComponentInstance">ComponentInstance</a></code><span class="inlineDescription_G7Er">-- <span>
<p>The new value of the component. Nil if just removed.</p>
</span></span></div><div><code>old?<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/matter/api/Component#ComponentInstance">ComponentInstance</a></code><span class="inlineDescription_G7Er">-- <span>
<p>The former value of the component. Nil if just added.</p>
</span></span></div></div><code>}</code></div><div></div><div>
<div class="admonition admonition-info alert alert--info">
  <div class="admonition-heading">
    <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
          <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path>
        </svg></span>Topologically-aware function</h5>
  </div>
  <div class="admonition-content">
    <p>This function is only usable if called within the context of <a href="/matter/api/Loop#begin"><code>Loop:begin</code></a>.</p>
  </div>
</div>
<p>Queries for components that have changed <strong>since the last time your system ran <code>queryChanged</code></strong>.</p>
<p>
  Only one changed record is returned per entity, even if the same entity changed multiple times. The order
  in which changed records are returned is not guaranteed to be the order that the changes occurred in.
</p>
<p>It should be noted that <code>queryChanged</code> does not have the same iterator invalidation concerns as <code>World:query</code>.</p>
<div class="admonition admonition-caution alert alert--warning">
  <div class="admonition-heading">
    <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">
          <path d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path>
        </svg></span>caution</h5>
  </div>
  <div class="admonition-content">
    <p>
      The first time your system runs (i.e., on the first frame), no results are returned. Results only begin to be
      tracked after the first time your system calls this function.
    </p>
  </div>
</div>
<div class="admonition admonition-info alert alert--info">
  <div class="admonition-heading">
    <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16">
          <path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path>
        </svg></span>info</h5>
  </div>
  <div class="admonition-content">
    <p>
      Calling this function from your system creates storage internally for your system. Then, changes meeting your
      criteria are pushed into your storage. Calling <code>queryChanged</code> again each frame drains this storage.
    </p>
    <p>
      If your system isn't called every frame, the storage will continually fill up and does not empty unless you drain
      it.
    </p>
    <p>If you stop calling <code>queryChanged</code> in your system, changes will stop being tracked.</p>
  </div>
</div>
<h3>Returns</h3>
<p><code>queryChanged</code> returns an iterator function, so you call it in a for loop just like <code>World:query</code>.</p>
<p>The iterator returns the entity ID, followed by a <a href="#ChangeRecord"><code>ChangeRecord</code></a>.</p>
<p>
  The <code>ChangeRecord</code> type is a table that contains two fields, <code>new</code> and <code>old</code>, respectively containing the new
  component instance, and the old component instance. <code>new</code> and <code>old</code> will never be the same value.
</p>
<p>
  <code>new</code> will be nil if the component was removed (or the entity was despawned), and <code>old</code> will be nil if the
  component was just added.
</p>
<p>
  The <code>old</code> field will be the value of the component the last time this system observed it, not
  necessarily the value it changed from most recently.
</p>
<p>
  The <code>ChangeRecord</code> table is potentially shared with multiple systems tracking changes for this component, so it
  cannot be modified.
</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">for</span> id<span class="token punctuation">,</span> record <span class="token keyword">in</span> world<span class="token punctuation">:</span><span class="token function">queryChanged</span><span class="token punctuation">(</span>Model<span class="token punctuation">)</span> <span class="token keyword">do</span>
	<span class="token keyword">if</span> record<span class="token punctuation">.</span>new <span class="token operator">==</span> <span class="token keyword">nil</span> <span class="token keyword">then</span>
		<span class="token comment">-- Model was removed</span>

		<span class="token keyword">if</span> enemy<span class="token punctuation">.</span>type <span class="token operator">==</span> <span class="token string">"this is a made up example"</span> <span class="token keyword">then</span>
			world<span class="token punctuation">:</span><span class="token function">remove</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> Enemy<span class="token punctuation">)</span>
		<span class="token keyword">end</span>
	<span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="insert"><code style="text-decoration:none">insert</code><a class="hash-link" href="#insert" title="Direct link to heading">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/evaera/matter/blob/main/lib/World.lua#L807"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">insert</code><code>(</code><div class="inset_uKQm"><div><code>id<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity ID</p>
</span></span></div><div><code>...<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/matter/api/Component#ComponentInstance">ComponentInstance</a></code><span class="inlineDescription_G7Er">-- <span>
<p>The component values to insert</p>
</span></span></div></div><code>) → </code><code>(</code><code>)</code></div><div>
<p>Inserts a component (or set of components) into an existing entity.</p>
<p>If another instance of a given component already exists on this entity, it is replaced.</p>
<pre class="language-lua"><code class="language-lua">world<span class="token punctuation">:</span><span class="token function">insert</span><span class="token punctuation">(</span>
	entityId<span class="token punctuation">,</span>
	<span class="token function">ComponentA</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		foo <span class="token operator">=</span> <span class="token string">"bar"</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token function">ComponentB</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		baz <span class="token operator">=</span> <span class="token string">"qux"</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="remove"><code style="text-decoration:none">remove</code><a class="hash-link" href="#remove" title="Direct link to heading">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/evaera/matter/blob/main/lib/World.lua#L854"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">remove</code><code>(</code><div class="inset_uKQm"><div><code>id<!-- -->: </code><code class="blue_P4bS">number</code><code>,</code><span class="inlineDescription_G7Er">-- <span>
<p>The entity ID</p>
</span></span></div><div><code>...<!-- -->: </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/matter/api/Component">Component</a></code><span class="inlineDescription_G7Er">-- <span>
<p>The components to remove</p>
</span></span></div></div><code>) → </code><code class="blue_P4bS"><a style="text-decoration:underline;color:inherit" href="/matter/api/Component#ComponentInstance">...ComponentInstance</a></code><span class="inlineDescription_G7Er">-- <span>
<p>Returns the component instance values that were removed in the order they were passed.</p>
</span></span></div><div>
<p>Removes a component (or set of components) from an existing entity.</p>
<pre class="language-lua"><code class="language-lua"><span class="token keyword">local</span> removedA<span class="token punctuation">,</span> removedB <span class="token operator">=</span> world<span class="token punctuation">:</span><span class="token function">remove</span><span class="token punctuation">(</span>entityId<span class="token punctuation">,</span> ComponentA<span class="token punctuation">,</span> ComponentB<span class="token punctuation">)</span>
</code></pre>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="size"><code style="text-decoration:none">size</code><a class="hash-link" href="#size" title="Direct link to heading">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/evaera/matter/blob/main/lib/World.lua#L895"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">size</code><code>(</code><code>) → </code><code>(</code><code>)</code></div><div>
<p>Returns the number of entities currently spawned in the world.</p>
</div><div class="divider_rE5g"></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="optimizeQueries"><code style="text-decoration:none">optimizeQueries</code><a class="hash-link" href="#optimizeQueries" title="Direct link to heading">​</a></h3><div class="repositoryDetailsContainer_BPdw"><a class="sourceButton_sEho" href="https://github.com/evaera/matter/blob/main/lib/World.lua#L913"><div class="sourceButtonText_Vh0m">&lt;/&gt;</div></a></div><div class="memberString_GwaU"><code>World<!-- -->:</code><code class="green_DgR4">optimizeQueries</code><code>(</code><code>) → </code><code>(</code><code>)</code></div><div>
<div class="admonition admonition-tip alert alert--success">
  <div class="admonition-heading">
    <h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16">
          <path d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path>
        </svg></span>tip</h5>
  </div>
  <div class="admonition-content">
    <p>
      <a href="/matter/api/Loop">Loop</a> automatically calls this function on your World(s), so there is no need to call it yourself if you're using
      a Loop.
    </p>
  </div>
</div>
<p>
  If you are not using a Loop, you should call this function at a regular interval (i.e., once per frame) to optimize
  the internal storage for queries.
</p>
<p>
  This is part of a strategy to eliminate iterator invalidation when modifying the World while inside a query from
  <a href="/matter/api/World#query">World:query</a>. While inside a query, any changes to the World are stored in a separate location from the rest of
  the World. Calling this function combines the separate storage back into the main storage, which speeds things up
  again.
</p>
</div></div></article></div><details><summary>Show raw api</summary><pre style="max-width:100%;white-space:pre-wrap">{
    &quot;functions&quot;: [
        {
            &quot;name&quot;: &quot;new&quot;,
            &quot;desc&quot;: &quot;Creates a new World.&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;static&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 25,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;__iter&quot;,
            &quot;desc&quot;: &quot;Iterates over all entities in this World. Iteration returns entity ID followed by a dictionary mapping\nComponent to Component Instance.\n\n**Usage:**\n\n```lua\nfor entityId, entityData in world do\n\tprint(entityId, entityData[Components.Example])\nend\n```&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;{[Component]: ComponentInstance}&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 118,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;spawn&quot;,
            &quot;desc&quot;: &quot;Spawns a new entity in the world with the given components.&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;...&quot;,
                    &quot;desc&quot;: &quot;The component values to spawn the entity with.&quot;,
                    &quot;lua_type&quot;: &quot;ComponentInstance&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The new entity ID.&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 128,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;spawnAt&quot;,
            &quot;desc&quot;: &quot;Spawns a new entity in the world with a specific entity ID and given components.\n\nThe next ID generated from [World:spawn] will be increased as needed to never collide with a manually specified ID.&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;id&quot;,
                    &quot;desc&quot;: &quot;The entity ID to spawn with&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;...&quot;,
                    &quot;desc&quot;: &quot;The component values to spawn the entity with.&quot;,
                    &quot;lua_type&quot;: &quot;ComponentInstance&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;The same entity ID that was passed in&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 141,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;replace&quot;,
            &quot;desc&quot;: &quot;Replaces a given entity by ID with an entirely new set of components.\nEquivalent to removing all components from an entity, and then adding these ones.&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;id&quot;,
                    &quot;desc&quot;: &quot;The entity ID&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;...&quot;,
                    &quot;desc&quot;: &quot;The component values to spawn the entity with.&quot;,
                    &quot;lua_type&quot;: &quot;ComponentInstance&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 259,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;despawn&quot;,
            &quot;desc&quot;: &quot;Despawns a given entity by ID, removing it and all its components from the world entirely.&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;id&quot;,
                    &quot;desc&quot;: &quot;The entity ID&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 301,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;clear&quot;,
            &quot;desc&quot;: &quot;Removes all entities from the world.\n\n:::caution\nRemoving entities in this way is not reported by `queryChanged`.\n:::&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 321,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;contains&quot;,
            &quot;desc&quot;: &quot;Checks if the given entity ID is currently spawned in this world.&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;id&quot;,
                    &quot;desc&quot;: &quot;The entity ID&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;`true` if the entity exists&quot;,
                    &quot;lua_type&quot;: &quot;bool&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 337,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;get&quot;,
            &quot;desc&quot;: &quot;Gets a specific component (or set of components) from a specific entity in this world.&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;id&quot;,
                    &quot;desc&quot;: &quot;The entity ID&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;...&quot;,
                    &quot;desc&quot;: &quot;The components to fetch&quot;,
                    &quot;lua_type&quot;: &quot;Component&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Returns the component values in the same order they were passed in&quot;,
                    &quot;lua_type&quot;: &quot;...&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 348,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;query&quot;,
            &quot;desc&quot;: &quot;Performs a query against the entities in this World. Returns a [QueryResult](/api/QueryResult), which iterates over\nthe results of the query.\n\nOrder of iteration is not guaranteed.\n\n```lua\nfor id, enemy, charge, model in world:query(Enemy, Charge, Model) do\n\t-- Do something\nend\n\nfor id in world:query(Target):without(Model) do\n\t-- Again, with feeling\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;...&quot;,
                    &quot;desc&quot;: &quot;The component types to query. Only entities with *all* of these components will be returned.&quot;,
                    &quot;lua_type&quot;: &quot;Component&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;See [QueryResult](/api/QueryResult) docs.&quot;,
                    &quot;lua_type&quot;: &quot;QueryResult&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 552,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;queryChanged&quot;,
            &quot;desc&quot;: &quot;:::info Topologically-aware function\nThis function is only usable if called within the context of [`Loop:begin`](/api/Loop#begin).\n:::\n\nQueries for components that have changed **since the last time your system ran `queryChanged`**.\n\nOnly one changed record is returned per entity, even if the same entity changed multiple times. The order\nin which changed records are returned is not guaranteed to be the order that the changes occurred in.\n\nIt should be noted that `queryChanged` does not have the same iterator invalidation concerns as `World:query`.\n\n:::caution\nThe first time your system runs (i.e., on the first frame), no results are returned. Results only begin to be\ntracked after the first time your system calls this function.\n:::\n\n:::info\nCalling this function from your system creates storage internally for your system. Then, changes meeting your\ncriteria are pushed into your storage. Calling `queryChanged` again each frame drains this storage.\n\nIf your system isn&#x27;t called every frame, the storage will continually fill up and does not empty unless you drain\nit.\n\nIf you stop calling `queryChanged` in your system, changes will stop being tracked.\n:::\n\n### Returns\n`queryChanged` returns an iterator function, so you call it in a for loop just like `World:query`.\n\nThe iterator returns the entity ID, followed by a [`ChangeRecord`](#ChangeRecord).\n\nThe `ChangeRecord` type is a table that contains two fields, `new` and `old`, respectively containing the new\ncomponent instance, and the old component instance. `new` and `old` will never be the same value.\n\n`new` will be nil if the component was removed (or the entity was despawned), and `old` will be nil if the\ncomponent was just added.\n\nThe `old` field will be the value of the component the last time this system observed it, not\nnecessarily the value it changed from most recently.\n\nThe `ChangeRecord` table is potentially shared with multiple systems tracking changes for this component, so it\ncannot be modified.\n\n```lua\nfor id, record in world:queryChanged(Model) do\n\tif record.new == nil then\n\t\t-- Model was removed\n\n\t\tif enemy.type == \&quot;this is a made up example\&quot; then\n\t\t\tworld:remove(id, Enemy)\n\t\tend\n\tend\nend\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;componentToTrack&quot;,
                    &quot;desc&quot;: &quot;The component you want to listen to changes for.&quot;,
                    &quot;lua_type&quot;: &quot;Component&quot;
                },
                {
                    &quot;name&quot;: &quot;...&quot;,
                    &quot;desc&quot;: &quot;&quot;,
                    &quot;lua_type&quot;: &quot;nil&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Iterator of entity ID and change record&quot;,
                    &quot;lua_type&quot;: &quot;() -&gt; (id, ChangeRecord)&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 730,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;insert&quot;,
            &quot;desc&quot;: &quot;Inserts a component (or set of components) into an existing entity.\n\nIf another instance of a given component already exists on this entity, it is replaced.\n\n```lua\nworld:insert(\n\tentityId,\n\tComponentA({\n\t\tfoo = \&quot;bar\&quot;\n\t}),\n\tComponentB({\n\t\tbaz = \&quot;qux\&quot;\n\t})\n)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;id&quot;,
                    &quot;desc&quot;: &quot;The entity ID&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;...&quot;,
                    &quot;desc&quot;: &quot;The component values to insert&quot;,
                    &quot;lua_type&quot;: &quot;ComponentInstance&quot;
                }
            ],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 807,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;remove&quot;,
            &quot;desc&quot;: &quot;Removes a component (or set of components) from an existing entity.\n\n```lua\nlocal removedA, removedB = world:remove(entityId, ComponentA, ComponentB)\n```&quot;,
            &quot;params&quot;: [
                {
                    &quot;name&quot;: &quot;id&quot;,
                    &quot;desc&quot;: &quot;The entity ID&quot;,
                    &quot;lua_type&quot;: &quot;number&quot;
                },
                {
                    &quot;name&quot;: &quot;...&quot;,
                    &quot;desc&quot;: &quot;The components to remove&quot;,
                    &quot;lua_type&quot;: &quot;Component&quot;
                }
            ],
            &quot;returns&quot;: [
                {
                    &quot;desc&quot;: &quot;Returns the component instance values that were removed in the order they were passed.&quot;,
                    &quot;lua_type&quot;: &quot;...ComponentInstance&quot;
                }
            ],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 854,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;size&quot;,
            &quot;desc&quot;: &quot;Returns the number of entities currently spawned in the world.&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 895,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        },
        {
            &quot;name&quot;: &quot;optimizeQueries&quot;,
            &quot;desc&quot;: &quot;:::tip\n[Loop] automatically calls this function on your World(s), so there is no need to call it yourself if you&#x27;re using\na Loop.\n:::\n\nIf you are not using a Loop, you should call this function at a regular interval (i.e., once per frame) to optimize\nthe internal storage for queries.\n\nThis is part of a strategy to eliminate iterator invalidation when modifying the World while inside a query from\n[World:query]. While inside a query, any changes to the World are stored in a separate location from the rest of\nthe World. Calling this function combines the separate storage back into the main storage, which speeds things up\nagain.&quot;,
            &quot;params&quot;: [],
            &quot;returns&quot;: [],
            &quot;function_type&quot;: &quot;method&quot;,
            &quot;source&quot;: {
                &quot;line&quot;: 913,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        }
    ],
    &quot;properties&quot;: [],
    &quot;types&quot;: [
        {
            &quot;name&quot;: &quot;ChangeRecord&quot;,
            &quot;desc&quot;: &quot;&quot;,
            &quot;fields&quot;: [
                {
                    &quot;name&quot;: &quot;new?&quot;,
                    &quot;lua_type&quot;: &quot;ComponentInstance&quot;,
                    &quot;desc&quot;: &quot;The new value of the component. Nil if just removed.&quot;
                },
                {
                    &quot;name&quot;: &quot;old?&quot;,
                    &quot;lua_type&quot;: &quot;ComponentInstance&quot;,
                    &quot;desc&quot;: &quot;The former value of the component. Nil if just added.&quot;
                }
            ],
            &quot;source&quot;: {
                &quot;line&quot;: 670,
                &quot;path&quot;: &quot;lib/World.lua&quot;
            }
        }
    ],
    &quot;name&quot;: &quot;World&quot;,
    &quot;desc&quot;: &quot;A World contains entities which have components.\nThe World is queryable and can be used to get entities with a specific set of components.\nEntities are simply ever-increasing integers.&quot;,
    &quot;source&quot;: {
        &quot;line&quot;: 19,
        &quot;path&quot;: &quot;lib/World.lua&quot;
    }
}</pre></details></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#types" class="table-of-contents__link toc-highlight">Types</a><ul><li><a href="#ChangeRecord" class="table-of-contents__link toc-highlight">ChangeRecord</a></li></ul></li><li><a href="#properties" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#functions" class="table-of-contents__link toc-highlight">Functions</a><ul><li><a href="#__iter" class="table-of-contents__link toc-highlight">:__iter</a></li><li><a href="#clear" class="table-of-contents__link toc-highlight">:clear</a></li><li><a href="#contains" class="table-of-contents__link toc-highlight">:contains</a></li><li><a href="#despawn" class="table-of-contents__link toc-highlight">:despawn</a></li><li><a href="#get" class="table-of-contents__link toc-highlight">:get</a></li><li><a href="#insert" class="table-of-contents__link toc-highlight">:insert</a></li><li><a href="#optimizeQueries" class="table-of-contents__link toc-highlight">:optimizeQueries</a></li><li><a href="#query" class="table-of-contents__link toc-highlight">:query</a></li><li><a href="#queryChanged" class="table-of-contents__link toc-highlight">:queryChanged</a></li><li><a href="#remove" class="table-of-contents__link toc-highlight">:remove</a></li><li><a href="#replace" class="table-of-contents__link toc-highlight">:replace</a></li><li><a href="#size" class="table-of-contents__link toc-highlight">:size</a></li><li><a href="#spawn" class="table-of-contents__link toc-highlight">:spawn</a></li><li><a href="#spawnAt" class="table-of-contents__link toc-highlight">:spawnAt</a></li><li><a href="#new" class="table-of-contents__link toc-highlight">.new</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 evaera. Built with Moonwave and Docusaurus.</div></div></div></footer></div>
<script src="/matter/assets/js/runtime~main.681328fc.js"></script>
<script src="/matter/assets/js/main.8433c967.js"></script>
</body>
</html>